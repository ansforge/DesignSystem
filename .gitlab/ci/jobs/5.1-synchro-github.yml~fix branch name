# Push code to ANS github.
.synchro:github:
  stage: deploy
  when: manual
  rules:
    - !reference [.syncho-github-ans, rules]
  variables:
    GITHUB_TOKEN: #add to gitlab variables when fix
    GITHUB_URL: github.com/ansforge/DesignSystem.git
  script:
    - git config --global user.name "${GITLAB_USER_NAME}"
    - git config --global user.email "${GITLAB_USER_EMAIL}"
    - git checkout -b temp-branch
    - git rm -r --cached .
    - git add .gitignore
    - git add *
    - git commit -m "Synchro Klee ANS"
    - git remote add github-ans https://root:$GITHUB_TOKEN@$GITHUB_URL
    - git pull github-ans main-klee
    - git push github-ans temp-branch:main-klee
    - git checkout synchro-github-ans
    - git branch -D temp-branch